<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>User</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">

    <style>
        .hide{
            visibility: hidden;
            width: 0px;
        }
    </style>
</head>
<body>

<div style="margin-left: 30px">
<form action="/update" method="POST" id="update" enctype="multipart/form-data">
    <label>
        Username: <input class="hide" type='text' value="{{.Username}}" name="username" id="username"> {{.Username}}</input>
    </label>
    <br>
    <label>
        Nickname:
        <input type="text" class="img-fluid" id="nickname" name="nickname" id="nickname" value="{{.Nickname}}"  aria-describedby="nickname" placeholder="nickname">
    </label>
    <br>
    Picture:
<!--    <div><input class="hide" type="file" name="picture" id="input" onchange="changeImg()" ><a href="javascript:;"><img id="image" src="{{.Picture}}" alt="No Image" onclick="clickInput()"></a></div>-->
    <div><input class="hide" type="file" name="picture" id="input" onchange="changeImg()" ><a href="javascript:;"><img id="image" src="{{.Picture}}" alt="No Image" onclick="clickInput()" height="300px"></a></div>
    <div style="padding-top: 10px"><input type="submit" class="btn btn-primary" value="Change"></div>

    <div>
            <a href="http://localhost:8888/"><div style="position:absolute;right:5%;top:1%"><input  class="btn btn-primary" value="登陆页" ></div></a>
    </div>
</form>
</div>


<script>
    function clickInput(){
        let input = document.getElementById("input");
        input.click();
    }

    function changeImg(){
        let img = new Image()
        img.onload=function(){
            document.getElementById("image").src = this.src
        }
        img.src=(window.URL||window.webkitURL).createObjectURL(input.files[0])
    }
</script>

<!--<script type="text/javascript">-->
<!--    $(document).ready(function () {-->
<!--        console.log('here');-->
<!--        e();-->
<!--    });-->
<!--    e = function () {-->
<!--        var usernameCookie = document.cookie.split("=")[1]-->
<!--        //'{"code":200,"data":{"nickname":"fuck","password":"fuck","avatar":"https://i.postimg.cc/264F5Jkn/illust-55866682-20180508-162405.png"}}';-->
<!--        if (usernameCookie !== null) {-->
<!--            $.ajax({-->
<!--                type: 'POST',-->
<!--                contentType: 'application/json;charset=UTF-8',-->
<!--                url: 'info',-->
<!--                data: '{"token":"' + usernameCookie + '"}',-->
<!--                success: function (respData) {-->
<!--                    console.log(respData)-->
<!--                    data = respData["data"]-->
<!--                    $('#username').val(respData['username'])-->
<!--                    $('#password').val(respData['nickname']);-->
<!--                    $('#picture').val(respData["picture"]);-->
<!--                    document.getElementById("image").src = data["picture"]-->
<!--                },-->
<!--                error: function (err) {-->
<!--                    console.log(err);-->
<!--                },-->
<!--            });-->
<!--        } else {-->

<!--        }-->
<!--    };-->
<!--</script>-->


</body>
</html>